// Import cookie module correctly
import * as cookie from 'cookie';

export default async function handler(req, res) {
  // Get the cookie from the request
  const cookies = req.headers.cookie ? cookie.parse(req.headers.cookie) : {};
  const isLoggedIn = cookies.loggedIn === 'true';
  
  if (!isLoggedIn) {
    return res.status(200).json({ loggedIn: false });
  }
  
  // For more security, you could add a session table and validate the session ID
  // This is a simplified version for the current setup
  return res.status(200).json({ 
    loggedIn: true
  });
}